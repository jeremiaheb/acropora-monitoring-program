---
title: "metrics"
format: html
---

```{r}
#| label: setup-and-process
#| message: false
#| warning: false
#| echo: false

# Source all custom functions for the analysis
source("code/dataFunctions.R")

# Load the raw data from the data directory
library(readxl)
TaggedColonies <- read_xlsx("data/TaggedColonies.xlsx")

# Process and summarize the data by calling the functions
Tagged_Metrics <- wrangle_coral_data(TaggedColonies)
site_summary <- summarize_site_metrics(Tagged_Metrics)
```

```{r}
#| message: false
#| warning: false
#| echo: false
#| out-width: "100%"

lai_plot <- plot_metric_over_time(
  summary_data = site_summary,
  y_var = LAI_mean,
  y_se = LAI_se,
  title = "Mean Live Area Index (LAI) Over Time by Site",
  y_lab = "Mean LAI (± SE)"
)

perc_live_plot <- plot_metric_over_time(
  summary_data = site_summary,
  y_var = Perc_Live_mean,
  y_se = Perc_Live_se,
  title = "Mean Percent Living Tissue Over Time by Site",
  y_lab = "Mean % Living Tissue (± SE)"
)

print(lai_plot)
print(perc_live_plot)
```

